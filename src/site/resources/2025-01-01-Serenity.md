---
title: Serenity & Screenplay 
intro: |
    The Screenplay Pattern uses the system metaphor of a stage performance, helping you model each test scenario like a little screenplay describing how the actors should go about performing their activities while interacting with the system under test.
date: 2025-01-01
tags:
    - Screenplay
    - Web
---

> The Screenplay Pattern uses the system metaphor of a stage performance, helping you model each test scenario like a little screenplay describing how the actors should go about performing their activities while interacting with the system under test.

Following the Screenplay Pattern helps you capture:

- Actors, who represent people and external systems interacting with the system under test
- Abilities, that act as thin wrappers around any integration libraries required to interact with the system under test
- Interactions, which represent the low-level activities an actor can perform using a given interface
- Tasks, used to model sequences of activities as meaningful steps of a business workflow in your domain
- Questions, used to retrieve information from the system under test and the test execution environment

<picture>
    <img src="/assets/img/screenplay.png" alt="Screenplay pattern" width="572" loading="lazy" decoding="async" />
</picture>

## Example

This example uses [Serenity](https://serenity-bdd.github.io/) with Selenium Webdriver.

#### Create these files in directory structures indicated

`pageopbjects/LoginPage.java`
```java
import net.serenitybdd.screenplay.targets.Target;
import net.thucydides.core.pages.PageObject;

public class LoginPage extends PageObject {

public static final Target USERNAME = Target.the("Username")
.locatedBy("#username");
public static final Target PASSWORD = Target.the("Password")
.locatedBy("#password");
public static final Target LOGIN_BTN = Target.the("Login Button")
.locatedBy(".submit");
}
```

`pageopbjects/Dashboard.java`
```java
import net.serenitybdd.screenplay.targets.Target;
import net.thucydides.core.pages.PageObject;

public class DashboardPage extends PageObject {

public static final Target SIGNOUT = Target.the("Logout")
.locatedBy(".icon-signout");
}
```

`tasks/AccessWebPage.java`
```java
import com.ui.screenplay.pageobject.LoginPage;
import net.serenitybdd.screenplay.Actor;
import net.serenitybdd.screenplay.Task;
import net.serenitybdd.screenplay.actions.Open;
import net.thucydides.core.annotations.Step;

import static net.serenitybdd.screenplay.Tasks.instrumented;

public class AccessWebPage implements Task {
public static AccessWebPage loginPage() {
return instrumented(AccessWebPage.class);
}

LoginPage loginPage;

@Step("{0} access Login page")
public <T extends Actor> void performAs(T t) {
t.attemptsTo(Open.browserOn().the(loginPage));
}
}
```

`tasks/LoginTo.java`
```java
import com.ui.screenplay.pageobject.LoginPage;
import net.serenitybdd.core.steps.Instrumented;
import net.serenitybdd.screenplay.Actor;
import net.serenitybdd.screenplay.Task;
import net.serenitybdd.screenplay.actions.Click;
import net.serenitybdd.screenplay.actions.Enter;
import net.thucydides.core.annotations.Step;
import org.openqa.selenium.Keys;

public class LoginTo implements Task {

@Step("{0} enter username and password '#username' '#password")
public <T extends Actor> void performAs(T actor)
{
actor.attemptsTo(Enter.theValue(username).into(LoginPage.USERNAME).thenHit(Keys.TAB));
actor.attemptsTo(Enter.theValue(password).into(LoginPage.PASSWORD).thenHit(Keys.TAB));
actor.attemptsTo(Click.on(LoginPage.LOGIN_BTN));
}

private String username;
private String password;

public LoginTo(String username, String password) {
this.username = username;
this.password = password;
}

public static Task withCredentials(String username, String password) {
return Instrumented
.instanceOf(LoginTo.class)
.withProperties(username, password);
}
}
```

`questions/Dashboard.java`
```java
import com.ui.screenplay.pageobject.DashboardPage;
import net.serenitybdd.screenplay.Actor;
import net.serenitybdd.screenplay.Question;
import net.serenitybdd.screenplay.questions.Text;

public class Dashboard implements Question<String> {

public static Question<String> displayed() {
return new Dashboard();
}

public String answeredBy(Actor actor) {
return Text.of(DashboardPage.SIGNOUT).answeredBy(actor);
}
}
```

`tests/ScreenPlayTest.java`
```java
import com.ui.screenplay.questions.Dashboard;
import com.ui.screenplay.tasks.LoginTo;
import net.serenitybdd.junit.runners.SerenityRunner;
import net.serenitybdd.screenplay.Actor;
import static net.serenitybdd.screenplay.GivenWhenThen.*;
import net.serenitybdd.screenplay.abilities.BrowseTheWeb;
import net.serenitybdd.screenplay.actions.Open;
import net.thucydides.core.annotations.Managed;
import org.hamcrest.CoreMatchers;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.openqa.selenium.WebDriver;

@RunWith(SerenityRunner.class)
public class ScreenPlayTest {

private Actor demoUser = Actor.named("Demo User");

@Managed
private WebDriver hisBrowser;

@Before
public void demoUserCanBrowseTheWeb(){
demoUser.can(BrowseTheWeb.with(hisBrowser));
}

@Test
public void browseTheWebAsDemoUser(){
demoUser.attemptsTo(Open.url("https://the-internet.herokuapp.com/login"));
givenThat(demoUser).attemptsTo(LoginTo.withCredentials("tomsmith", "SuperSecretPassword!"));
then(demoUser).should(seeThat(Dashboard.displayed(), CoreMatchers.equalTo("demouser1")));
}

}
```
